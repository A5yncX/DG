---
import ThemeToggle from "./ThemeToggle.astro";
---

<header
  class="sticky top-0 z-50 w-full mb-6
         bg-fontdefault dark:bg-bgdefault transition-colors"
>
  <!-- 仅内容限宽；背景全屏铺开 -->
  <div class="mx-auto w-full max-w-screen-md
              flex h-12 items-center justify-between">
    {/* 桌面导航 */}
    <nav class="hidden md:flex items-center gap-4">
      <a href="/">Home</a>
      <a href="/posts">Posts</a>
      <a href="/tags">Tag</a>
      <a href="/bmmg">Media</a>
      <!-- <a href="https://exercise.asyncx.top" target="_blank" rel="noopener noreferrer">Steps</a> -->
      <a href="/about">README.md</a>
    </nav>

    {/* 桌面主题切换 */}
    <div class="hidden md:block">
      <ThemeToggle />
    </div>

    {/* 移动端：汉堡 + 主题切换 */}
    <div class="md:hidden flex items-center gap-2">
      <details class="relative">
        <summary
          class="list-none cursor-pointer p-2 rounded-md
                 hover:bg-zinc-100 dark:hover:bg-zinc-800
                 outline-none focus-visible:ring-2
                 focus-visible:ring-zinc-400 dark:focus-visible:ring-zinc-600"
          aria-label="Open menu"
        >
          <!-- 汉堡图标 -->
          <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6"
               viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4 7h16M4 12h16M4 17h16" />
          </svg>
        </summary>

        <!-- 下拉菜单背景也跟随站点配色 -->
        <nav class="absolute top-0 left-[calc(100%+0.5rem)] z-50
                  w-56 max-w-[80vw]
                  rounded-lg border border-zinc-200 dark:border-zinc-800
                  bg-fontdefault dark:bg-bgdefault shadow-lg">
          <ul class="py-1">
            <li><a class="block px-3 py-2 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800" href="/">Home</a></li>
            <li><a class="block px-3 py-2 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800" href="/posts">Posts</a></li>
            <li><a class="block px-3 py-2 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800" href="/tags">Tag</a></li>
            <li><a class="block px-3 py-2 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800" href="/bmmg">Media</a></li>
            <li><a class="block px-3 py-2 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800" href="https://exercise.asyncx.top" target="_blank" rel="noopener noreferrer">Steps</a></li>
            <li><a class="block px-3 py-2 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800" href="/about">README.md</a></li>
          </ul>
        </nav>
      </details>

      <ThemeToggle />
    </div>
  </div>
</header>

<style>
  /* 保持你之前的链接交互样式 */
  a {
    @apply inline-flex items-center h-10
           font-medium text-zinc-500 hover:text-zinc-900 dark:hover:text-zinc-100
           transition-[color,transform] duration-200 ease-out motion-reduce:transition-none;
  }
  a:focus-visible {
    @apply text-zinc-900 dark:text-zinc-100 outline-none ring-2 ring-zinc-400 dark:ring-zinc-600 ring-offset-2 ring-offset-white dark:ring-offset-zinc-900;
  }
  a:hover,
  a:focus-visible { transform: scale(1.04); }
  a:active { transform: scale(0.96); }
</style>
