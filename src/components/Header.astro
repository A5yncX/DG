---
import HeaderLink from "./HeaderLink.astro";
import Social from "./Social.astro";
import LangLink from "./LangLink.astro";

import {useTranslations} from "../i18n/utils";
const { lang } = Astro.props;
const t = useTranslations(lang);

const homeSlug = `/${lang || ""}`;
const blogSlug = `/${lang || ""}/blog`;
const tagSlug = `/${lang || ""}/tags`;
const aboutSlug = `/${lang || ""}/about`;
const friendSlug = `/${lang || ""}/friends`;
const rssSlug = `/${lang || ""}.xml`;


const { pathname } = Astro.url;

// 添加一个变量以确定是否为文章页面
const isArticlePage = pathname.startsWith(blogSlug);

---

<header>
  <nav>
    <div class="header-home"><img src="/favicon.svg" alt="Logo" width="40"><a href="/">AsyncX</a></div>
    <div class="internal-links">
      <HeaderLink href={homeSlug}>{t("header.home")}</HeaderLink>
      <HeaderLink href={blogSlug}>{t("header.blog")}</HeaderLink>
      <HeaderLink href={tagSlug}>{t("header.tags")}</HeaderLink>
      <HeaderLink href={aboutSlug}>{t("header.about")}</HeaderLink>
      <HeaderLink href={friendSlug}>{t("friends.title")}</HeaderLink>
    <!-- //lang -->
    {/* 根据条件决定是否启用 */}
    {isArticlePage ? (
        <div class="language-dropdown">
          <div>
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="19" height="19" viewBox="0,0,256,256"><g transform="translate(-49.92,-49.92) scale(1.39,1.39)"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(2.56,2.56)"><ellipse cx="50.019" cy="49.953" rx="34.981" ry="34.726" fill="#78a1d1"></ellipse><path d="M17.642,61.189c0,0 3.566,-9.057 10.075,-7.132c6.509,1.925 12.453,9.453 12.453,9.453c0,0 5.83,6.906 10.528,9.113c0,0 8.604,7.755 24.283,2.151c0,0 -15.17,16.642 -37.868,7.755c0,-0.001 -15.849,-5.378 -19.471,-21.34z" fill="#6475a4"></path><path d="M16.396,44.094c0,0 4.458,-6.792 10.486,-7.344c0,0 3.821,-0.467 7.047,0.679c3.226,1.146 7.599,4.373 8.958,5.561c1.359,1.188 7.047,8.321 7.047,8.321l7.684,9.042l8.575,5.392l8.151,0.679l8.915,-4.967l1.656,-11.802c0,0 -4.33,4.925 -9.934,2.717c-5.604,-2.208 -12.608,-11.165 -12.608,-11.165c0,0 -8.756,-15.45 -19.427,-18.147c0,0 -3.455,-1.084 -6.002,-0.957c-2.547,0.127 -10.741,2.547 -10.741,2.547c0,0 -10.613,9.595 -9.807,19.444z" fill="#c6def0"></path><path d="M40.17,16.84c0,0 11.377,-0.679 18.849,4.84c7.472,5.519 8.066,6.863 10.019,9.764c2.972,4.415 5.052,9.127 10.825,10.146c5.774,1.019 4.627,-0.637 4.627,-0.637c0,0 -4.84,-14.094 -15.877,-20.717c0,0 -14.094,-9.085 -28.443,-3.396z" fill="#fdfcee"></path><path d="M50,14c-19.87,0 -36,16.13 -36,36c0,19.87 16.13,36 36,36c19.87,0 36,-16.13 36,-36c0,-19.87 -16.13,-36 -36,-36zM73.699,74.377c-2.44,1.273 -13.214,5.872 -26.194,-3.898c-0.221,-0.168 -0.534,-0.122 -0.7,0.099c-0.166,0.221 -0.122,0.534 0.099,0.7c6.475,4.874 12.449,6.282 17.192,6.282c3.017,0 5.526,-0.571 7.359,-1.182c-5.851,4.764 -13.316,7.622 -21.455,7.622c-14.563,0 -26.97,-9.14 -31.817,-21.998c0.578,-1.663 2.467,-6.128 6.332,-7.005c3.947,-0.896 8.865,2.073 14.605,8.827c0.098,0.116 0.238,0.176 0.38,0.176c0.115,0 0.23,-0.039 0.324,-0.119c0.21,-0.179 0.236,-0.494 0.057,-0.705c-6.002,-7.061 -11.249,-10.146 -15.592,-9.152c-3.66,0.832 -5.684,4.313 -6.619,6.512c-1.079,-3.318 -1.67,-6.857 -1.67,-10.536c0,-1.328 0.084,-2.636 0.232,-3.924c1.039,-2.224 5.202,-9.848 13.312,-9.513c0.28,0.013 0.509,-0.203 0.521,-0.479c0.012,-0.275 -0.202,-0.509 -0.478,-0.521c-6.648,-0.268 -10.818,4.397 -12.913,7.67c1.242,-6.157 4.144,-11.708 8.221,-16.168c2.239,-1.573 7.845,-4.806 14.906,-3.712c0.277,0.046 0.529,-0.145 0.571,-0.418c0.042,-0.272 -0.145,-0.528 -0.417,-0.57c-4.905,-0.761 -9.089,0.425 -12.058,1.804c3.352,-2.87 7.267,-5.098 11.561,-6.496c4.652,-0.575 17.334,-0.765 27.985,11.689c1.176,1.376 2.314,3.007 3.479,4.987c0.093,0.159 0.26,0.247 0.432,0.247c0.086,0 0.173,-0.022 0.253,-0.069c0.238,-0.14 0.317,-0.446 0.178,-0.684c-1.194,-2.032 -2.366,-3.711 -3.581,-5.132c-8.284,-9.687 -17.782,-11.94 -24.022,-12.205c1.89,-0.327 3.832,-0.506 5.818,-0.506c15.716,0 28.921,10.645 32.823,25.121c-4.468,0.781 -7.934,-2.672 -10.089,-5.788c-0.157,-0.229 -0.47,-0.286 -0.695,-0.127c-0.228,0.157 -0.284,0.469 -0.127,0.695c1.734,2.507 5.128,6.339 9.67,6.339c0.481,0 0.979,-0.06 1.484,-0.152c0.56,2.351 0.875,4.797 0.919,7.31c-0.335,0.58 -1.978,3.119 -5.21,3.349c-3.526,0.243 -9.662,-2.239 -18.864,-15.531c-5.19,-7.497 -10.898,-12.26 -16.966,-14.155c-0.264,-0.087 -0.545,0.064 -0.626,0.328c-0.083,0.264 0.064,0.544 0.328,0.627c5.849,1.827 11.381,6.46 16.441,13.769c7.345,10.609 13.797,15.98 19.192,15.98c0.189,0 0.378,-0.007 0.565,-0.02c2.519,-0.179 4.18,-1.538 5.126,-2.628c-0.115,3.548 -0.769,6.957 -1.888,10.148c-3.03,3.032 -6.339,4.657 -9.859,4.81c-6.083,0.28 -11.743,-3.847 -15.417,-7.345c-2.225,-2.118 -4.292,-4.708 -6.146,-7.698c-1.667,-2.689 -4.468,-6.581 -8.352,-9.843c-0.211,-0.179 -0.527,-0.15 -0.705,0.062c-0.178,0.211 -0.15,0.526 0.061,0.704c3.782,3.177 6.517,6.977 8.146,9.604c1.897,3.062 4.019,5.718 6.306,7.896c3.695,3.517 9.345,7.633 15.546,7.633c0.201,0 0.403,-0.005 0.604,-0.014c3.191,-0.139 6.207,-1.387 9.003,-3.706c-1.78,4.166 -4.371,7.898 -7.571,11.009z" fill="#212121"></path><path d="M41.67,65.185c-0.188,-0.2 -0.505,-0.211 -0.707,-0.023c-0.202,0.188 -0.212,0.505 -0.024,0.707c1.41,1.508 2.868,2.893 4.333,4.116c0.093,0.078 0.207,0.116 0.32,0.116c0.144,0 0.286,-0.062 0.384,-0.18c0.177,-0.212 0.148,-0.527 -0.063,-0.704c-1.433,-1.197 -2.861,-2.554 -4.243,-4.032z" fill="#212121"></path><path d="M32.621,36.015c-0.268,-0.067 -0.54,0.096 -0.606,0.364c-0.067,0.268 0.096,0.539 0.364,0.606c2.416,0.604 4.812,1.719 7.122,3.313c0.087,0.061 0.186,0.089 0.284,0.089c0.159,0 0.315,-0.075 0.412,-0.216c0.157,-0.228 0.1,-0.539 -0.127,-0.695c-2.41,-1.663 -4.916,-2.828 -7.449,-3.461z" fill="#212121"></path></g></g></g></svg>
          </div>
          <div class="dropdown-content">
            <a href="/zh/blog">🇨🇳 中文</a>
            <a href="/en/blog">🇺🇸 English</a>
          </div>
        </div>
        <a href={rssSlug} class="icon-link">
          <svg t="1709804049548" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8431" width="200" height="200"><path d="M42.666667 853.333333a128 128 0 1 1 256 0 128 128 0 0 1-256 0z m938.666666 128h-178.773333c0-418.986667-340.906667-759.893333-759.893333-759.893333V42.666667c517.546667 0 938.666667 421.12 938.666666 938.666666z m-298.666666 0h-182.826667c0-252.074667-205.098667-457.130667-457.173333-457.130666V341.333333c352.896 0 640 287.104 640 640z" fill="#EE802F" p-id="8432"></path></svg>
      </a>

      ) : (
      <div class="language-dropdown">
      <div>
        <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" width="19" height="19" viewBox="0,0,256,256"><g transform="translate(-49.92,-49.92) scale(1.39,1.39)"><g fill="none" fill-rule="nonzero" stroke="none" stroke-width="1" stroke-linecap="butt" stroke-linejoin="miter" stroke-miterlimit="10" stroke-dasharray="" stroke-dashoffset="0" font-family="none" font-weight="none" font-size="none" text-anchor="none" style="mix-blend-mode: normal"><g transform="scale(2.56,2.56)"><ellipse cx="50.019" cy="49.953" rx="34.981" ry="34.726" fill="#78a1d1"></ellipse><path d="M17.642,61.189c0,0 3.566,-9.057 10.075,-7.132c6.509,1.925 12.453,9.453 12.453,9.453c0,0 5.83,6.906 10.528,9.113c0,0 8.604,7.755 24.283,2.151c0,0 -15.17,16.642 -37.868,7.755c0,-0.001 -15.849,-5.378 -19.471,-21.34z" fill="#6475a4"></path><path d="M16.396,44.094c0,0 4.458,-6.792 10.486,-7.344c0,0 3.821,-0.467 7.047,0.679c3.226,1.146 7.599,4.373 8.958,5.561c1.359,1.188 7.047,8.321 7.047,8.321l7.684,9.042l8.575,5.392l8.151,0.679l8.915,-4.967l1.656,-11.802c0,0 -4.33,4.925 -9.934,2.717c-5.604,-2.208 -12.608,-11.165 -12.608,-11.165c0,0 -8.756,-15.45 -19.427,-18.147c0,0 -3.455,-1.084 -6.002,-0.957c-2.547,0.127 -10.741,2.547 -10.741,2.547c0,0 -10.613,9.595 -9.807,19.444z" fill="#c6def0"></path><path d="M40.17,16.84c0,0 11.377,-0.679 18.849,4.84c7.472,5.519 8.066,6.863 10.019,9.764c2.972,4.415 5.052,9.127 10.825,10.146c5.774,1.019 4.627,-0.637 4.627,-0.637c0,0 -4.84,-14.094 -15.877,-20.717c0,0 -14.094,-9.085 -28.443,-3.396z" fill="#fdfcee"></path><path d="M50,14c-19.87,0 -36,16.13 -36,36c0,19.87 16.13,36 36,36c19.87,0 36,-16.13 36,-36c0,-19.87 -16.13,-36 -36,-36zM73.699,74.377c-2.44,1.273 -13.214,5.872 -26.194,-3.898c-0.221,-0.168 -0.534,-0.122 -0.7,0.099c-0.166,0.221 -0.122,0.534 0.099,0.7c6.475,4.874 12.449,6.282 17.192,6.282c3.017,0 5.526,-0.571 7.359,-1.182c-5.851,4.764 -13.316,7.622 -21.455,7.622c-14.563,0 -26.97,-9.14 -31.817,-21.998c0.578,-1.663 2.467,-6.128 6.332,-7.005c3.947,-0.896 8.865,2.073 14.605,8.827c0.098,0.116 0.238,0.176 0.38,0.176c0.115,0 0.23,-0.039 0.324,-0.119c0.21,-0.179 0.236,-0.494 0.057,-0.705c-6.002,-7.061 -11.249,-10.146 -15.592,-9.152c-3.66,0.832 -5.684,4.313 -6.619,6.512c-1.079,-3.318 -1.67,-6.857 -1.67,-10.536c0,-1.328 0.084,-2.636 0.232,-3.924c1.039,-2.224 5.202,-9.848 13.312,-9.513c0.28,0.013 0.509,-0.203 0.521,-0.479c0.012,-0.275 -0.202,-0.509 -0.478,-0.521c-6.648,-0.268 -10.818,4.397 -12.913,7.67c1.242,-6.157 4.144,-11.708 8.221,-16.168c2.239,-1.573 7.845,-4.806 14.906,-3.712c0.277,0.046 0.529,-0.145 0.571,-0.418c0.042,-0.272 -0.145,-0.528 -0.417,-0.57c-4.905,-0.761 -9.089,0.425 -12.058,1.804c3.352,-2.87 7.267,-5.098 11.561,-6.496c4.652,-0.575 17.334,-0.765 27.985,11.689c1.176,1.376 2.314,3.007 3.479,4.987c0.093,0.159 0.26,0.247 0.432,0.247c0.086,0 0.173,-0.022 0.253,-0.069c0.238,-0.14 0.317,-0.446 0.178,-0.684c-1.194,-2.032 -2.366,-3.711 -3.581,-5.132c-8.284,-9.687 -17.782,-11.94 -24.022,-12.205c1.89,-0.327 3.832,-0.506 5.818,-0.506c15.716,0 28.921,10.645 32.823,25.121c-4.468,0.781 -7.934,-2.672 -10.089,-5.788c-0.157,-0.229 -0.47,-0.286 -0.695,-0.127c-0.228,0.157 -0.284,0.469 -0.127,0.695c1.734,2.507 5.128,6.339 9.67,6.339c0.481,0 0.979,-0.06 1.484,-0.152c0.56,2.351 0.875,4.797 0.919,7.31c-0.335,0.58 -1.978,3.119 -5.21,3.349c-3.526,0.243 -9.662,-2.239 -18.864,-15.531c-5.19,-7.497 -10.898,-12.26 -16.966,-14.155c-0.264,-0.087 -0.545,0.064 -0.626,0.328c-0.083,0.264 0.064,0.544 0.328,0.627c5.849,1.827 11.381,6.46 16.441,13.769c7.345,10.609 13.797,15.98 19.192,15.98c0.189,0 0.378,-0.007 0.565,-0.02c2.519,-0.179 4.18,-1.538 5.126,-2.628c-0.115,3.548 -0.769,6.957 -1.888,10.148c-3.03,3.032 -6.339,4.657 -9.859,4.81c-6.083,0.28 -11.743,-3.847 -15.417,-7.345c-2.225,-2.118 -4.292,-4.708 -6.146,-7.698c-1.667,-2.689 -4.468,-6.581 -8.352,-9.843c-0.211,-0.179 -0.527,-0.15 -0.705,0.062c-0.178,0.211 -0.15,0.526 0.061,0.704c3.782,3.177 6.517,6.977 8.146,9.604c1.897,3.062 4.019,5.718 6.306,7.896c3.695,3.517 9.345,7.633 15.546,7.633c0.201,0 0.403,-0.005 0.604,-0.014c3.191,-0.139 6.207,-1.387 9.003,-3.706c-1.78,4.166 -4.371,7.898 -7.571,11.009z" fill="#212121"></path><path d="M41.67,65.185c-0.188,-0.2 -0.505,-0.211 -0.707,-0.023c-0.202,0.188 -0.212,0.505 -0.024,0.707c1.41,1.508 2.868,2.893 4.333,4.116c0.093,0.078 0.207,0.116 0.32,0.116c0.144,0 0.286,-0.062 0.384,-0.18c0.177,-0.212 0.148,-0.527 -0.063,-0.704c-1.433,-1.197 -2.861,-2.554 -4.243,-4.032z" fill="#212121"></path><path d="M32.621,36.015c-0.268,-0.067 -0.54,0.096 -0.606,0.364c-0.067,0.268 0.096,0.539 0.364,0.606c2.416,0.604 4.812,1.719 7.122,3.313c0.087,0.061 0.186,0.089 0.284,0.089c0.159,0 0.315,-0.075 0.412,-0.216c0.157,-0.228 0.1,-0.539 -0.127,-0.695c-2.41,-1.663 -4.916,-2.828 -7.449,-3.461z" fill="#212121"></path></g></g></g></svg>
      </div>
      <div class="dropdown-content">
          <LangLink language="zh" isActive={lang == "zh"}>🇨🇳 中文</LangLink>
          <LangLink language="en" isActive={lang == "en"}>🇺🇸 English</LangLink>
        </div>
      </div>
      <a href={rssSlug} class="icon-link">
        <svg t="1709804049548" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="8431" width="200" height="200"><path d="M42.666667 853.333333a128 128 0 1 1 256 0 128 128 0 0 1-256 0z m938.666666 128h-178.773333c0-418.986667-340.906667-759.893333-759.893333-759.893333V42.666667c517.546667 0 938.666667 421.12 938.666666 938.666666z m-298.666666 0h-182.826667c0-252.074667-205.098667-457.130667-457.173333-457.130666V341.333333c352.896 0 640 287.104 640 640z" fill="#EE802F" p-id="8432"></path></svg>
      </a>
        )}
        </div>
  </nav>
</header>
<style>
  .header-home {
    display: flex;
    font-size: 1.5rem;
  }
@media only screen and (max-width: 600px) {
	/* 在宽度小于等于600px的设备上应用以下样式 */
	/* 这里可以放置针对移动设备的样式设置 */
	  header {
		display: none;
    z-index: 100;
	  }
	
  }
  header {
    font-size: 1.07rem;
    z-index: 100;
    position: relative;
    margin: 0;
    padding: 0 1em;
    background: var(--bgc);
  }
  h2 {
    margin: 0;
    font-size: 1em;
  }

  h2 a,
  h2 a.active {
    text-decoration: none;
  }
  nav {
    padding: 1em 0.5em;
    display: flex;
    align-items: center;
    justify-content: space-around;
  }
  nav a {
    font-family: var(--font-family-pix);
    padding: 0.5em 0.5em;
    color: var(--black);
    text-decoration: none;
  }
  nav a.active {
    /* text-decoration: bold; */
    color: var(--hc);
    font-weight: bolder;
  }
  .social-links,
  .social-links a {
    display: flex;
  }

  .internal-links {
    display: flex;
  }
  @media (max-width: 720px) {
    .social-links {
      display: none;
    }
  }

</style>

<style>
  .language-dropdown {
    padding: 0.5em 0.5em;
    position: relative;
    display: inline-block;
  }
  .dropdown-content {
    font-size: 0.8rem;
    border-radius: 5px;
    display: none;
    position: absolute;
    min-width: 90px;
    z-index: 1;
    top: 100%;
  }
  .dropdown-content a {
    text-decoration: none;
    display: block;
    border-radius: 10px;
  }
  .dropdown-content a:hover {
    background-color: #8c88887f;
  }
  .language-dropdown:hover .dropdown-content {
    display: block;
  }

  .icon-link {
    vertical-align: middle; /* 将图标垂直居中 */
    display: inline-block;
    width: 24px; /* 调整宽度和高度以适应您的 SVG 图标 */
    height: 24px;
    fill: #ffffff; /* 设置默认的 SVG 颜色 */
    transition: fill 0.3s ease; /* 添加过渡效果 */
    margin-left: 5px;
}

.icon-link:hover {
    fill: #8dd3ff; /* 设置鼠标悬停时的 SVG 颜色 */
}
.icon-link svg {
    width: 1rem; /* 调整图标的宽度 */
    height: 1rem; /* 调整图标的高度 */
}
</style>