---
import { getCollection } from 'astro:content';
import Layout from "../../../layouts/Layout.astro";
import { getLangFromUrl } from "../../../i18n/utils";


export async function getStaticPaths() {
    const languages = ["zh", "en"]; // 支持的语言列表
    const paths = [];

    for (const lang of languages) {
        const blog = await getCollection('blog', ({ id }) => id.startsWith(`${lang}/`));
        const tags = [...new Set([].concat.apply([], blog.map(post => post.data.tags)))];
        
        // 为每个标签生成路径对象
        const langPaths = tags.map((tag) => {
            return {
                params: { tag, lang }, // 使用当前语言变量
            };
        });

        // 将当前语言的路径合并到总路径数组中
        paths.push(...langPaths);
    }

    return paths;
}
---
<Layout
  comments={false}
>
test

<style>
    main {
        width: 960px;
    }
    ul {
        /* display: flex; */
        flex-wrap: wrap;
        gap: 2rem;
        list-style-type: none;
        margin: 0;
        padding: 0;
    }
    ul li {
        display: flex;
        margin-top: 1rem;
    }
    ul li * {

        text-decoration: none;
        transition: 0.2s ease;
    }

    ul li a {
        display: flex;
        font-family: var(--font-family-pix);
    }

    ul li h5{
        text-align: center;
    }
    .title {
        margin: 0;
        line-height: 1;
    }
    .date {
        font-family: var(--font-family-pix);
        min-width: 110px;
        padding-right: 2rem;
        margin: 0;
        color: var(--gray);
    }

    /* 标题变色: */
    ul li a:hover h5,
    ul li a:hover .date {
        color: var(--accent);
    }
    ul a:hover img {
        box-shadow: var(--box-shadow);
    }
    @media (max-width: 720px) {
        ul {
            gap: 0.5em;
        }
        ul li {
            display:inherit;
            width: 100%;
            /* text-align: center; */
        }

    }
</style>
</Layout>